angular.module("gthiveApp",["app.routes","mainCtrl","buildingCtrl","buildingService","uiGmapgoogle-maps"]).config(["uiGmapGoogleMapApiProvider",function(i){i.configure({v:"3.20",libraries:"geometry,visualization"})}]),angular.module("app.routes",["ngRoute"]).config(["$routeProvider","$locationProvider",function(i,e){i.when("/",{templateUrl:"app/views/pages/home.html"}).when("/login",{templateUrl:"app/views/pages/login.html"}).when("/buildings/:bid",{templateUrl:"app/views/pages/building.html",controller:"buildingController"}),e.html5Mode(!0)}]),angular.module("buildingCtrl",["buildingService","chart.js"]).controller("buildingController",["$scope","$routeParams","Building",function(i,e,t){i.labels=["monday","tuesday","wednesday","thursday"],i.series=["Series A"],i.data=[[65,59,80,81]],console.log("Building page for building_id="+e.bid)}]),angular.module("mainCtrl",["uiGmapgoogle-maps","buildingService"]).controller("mainController",["$scope","uiGmapGoogleMapApi","Building","$log",function(i,e,t,l){var o=this;o.processing=!0,i.markers=[],i.selectedMarker={},i.infoWindow={options:{show:!1},templateUrl:"app/views/templates/info.html",templateParameter:{title:"",occupancy:"",building_id:-1}},i.mapOptions={disableDefaultUI:!0,minZoom:10,maxZoom:16,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"}]}]},i.closeClick=function(){i.windowOptions.show=!1},e.then(function(e){return i.map={center:{latitude:33.7762,longitude:-84.3975},zoom:16,options:i.mapOptions,polygons:[{id:1,path:[{latitude:33.733618,longitude:-84.454983},{latitude:33.81923,longitude:-84.454983},{latitude:33.81923,longitude:-84.342974},{latitude:33.733618,longitude:-84.342974},{latitude:33.733618,longitude:-84.454983},{latitude:33.773618,longitude:-84.403067},{latitude:33.773395,longitude:-84.402219},{latitude:33.773395,longitude:-84.399698},{latitude:33.772887,longitude:-84.397348},{latitude:33.77245,longitude:-84.396329},{latitude:33.771299,longitude:-84.390578},{latitude:33.771335,longitude:-84.390514},{latitude:33.773895,longitude:-84.39104},{latitude:33.775924,longitude:-84.391136},{latitude:33.777952,longitude:-84.391351},{latitude:33.781502,longitude:-84.407401},{latitude:33.781395,longitude:-84.407395},{latitude:33.779837,longitude:-84.407476},{latitude:33.778351,longitude:-84.407207},{latitude:33.777448,longitude:-84.406755},{latitude:33.77657,longitude:-84.406108},{latitude:33.775955,longitude:-84.404815},{latitude:33.774938,longitude:-84.404118},{latitude:33.774332,longitude:-84.403067},{latitude:33.773618,longitude:-84.403067}],stroke:{color:"#000000",weight:2},geodesic:!1,visible:!0,fill:{color:"#CACACA",opacity:.7}}]},t.all()}).then(function(e){o.buildings=e.data;for(var t=function(e,t){var n={id:e,coords:{latitude:t.latitude,longitude:t.longitude},options:{title:t.name,labelContent:t.abbreviation}};return t.occupancy<=40?n.icon="http://maps.google.com/mapfiles/ms/icons/green-dot.png":t.occupancy<=80?n.icon="http://maps.google.com/mapfiles/ms/icons/yellow-dot.png":n.icon="http://maps.google.com/mapfiles/ms/icons/red-dot.png",n.onClick=function(){l.log(n.options.title+" clicked!"),i.$apply(function(){i.selectedMarker=n,i.infoWindow.templateParameter.title=n.options.title,i.infoWindow.templateParameter.occupancy=o.buildings[n.id].occupancy,i.infoWindow.templateParameter.building_id=n.id,i.infoWindow.options.show=!0})},n},n=0;n<o.buildings.length;n++)i.markers.push(t(n,o.buildings[n]))})["catch"](function(){l.log("Error occurred, see logs.")}).then(function(){o.processing=!1})}]),angular.module("buildingService",[]).factory("Building",["$http","$log",function(i,e){var t={};return t.all=function(){return i.get("/api/buildings")},t.get=function(e){return i.get("/api/buildings/"+e)},t}]);